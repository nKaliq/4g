!function(){"use strict";(function(){var n,c=10,s=!0,l=(window.CFTracking||{}).context||{},i=!0,R=0,a=0,u=[];function E(){i=!1}function d(){var e;0!==u.length?(e=u.length>=c?u.slice(0,c):u.slice(0),u.length=0,s&&console.log("DEBUG-ERROR-CATCHER: sending "+e.length+" errors ",e),function(e,n,o,t){s&&console.log("DEBUG-ERROR-CATCHER: ajax call to "+e);try{(t=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0")).open(o?"POST":"GET",e,1),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){3<t.readyState&&(s&&console.log("DEBUG-ERROR-CATCHER: ajax call received response "+t.responseText),n&&n(t.responseText,t))},t.send(o)}catch(e){window.console&&console.log(e)}}(encodeURI(n),function(e,n){"STOP"===e&&E()},encodeURI(function(e){for(var n=[],o=0;o<e.length;o++)n.push(t(e[o]));return"&errors="+encodeURIComponent("["+n.join(",")+"]")}(e))),a+=e.length):s&&console.log("DEBUG-ERROR-CATCHER: send was called but stack is empty. Will do nothing!")}function o(n,e,o,t,r){if(i&&null!==r)try{s&&console.log("DEBUG-ERROR-CATCHER: onError handler "+n),function(e){c<=a&&(s&&console.log("DEBUG-ERROR-CATCHER: too many errors. Going to stop sending data."),E());for(var n in s&&console.log("DEBUG-ERROR-CATCHER: queue error ",e),R++,l)l.hasOwnProperty(n)&&(e[n]=l[n]);e.url=window.location.href,u.push(e),setTimeout(function(){d()},100)}({msg:n=n.replace(/\"/g,'\\"'),file:e,ln:o,cl:t,cnt:R+1})}catch(e){s&&console.log("DEBUG-ERROR-CATCHER: just prevented a storm of JS errors "+n)}}function t(e){var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push('"'+o+'":"'+e[o]+'"');return"{"+n.join(",")+"}"}return{init:function(e){n=e,window.onerror=o}}})().init("/ajax_error_capture.php")}();